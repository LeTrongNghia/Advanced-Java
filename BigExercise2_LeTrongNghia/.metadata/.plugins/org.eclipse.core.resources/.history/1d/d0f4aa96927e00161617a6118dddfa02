package Task2_1;

import java.io.BufferedReader;
import java.io.IOException;
import java.io.InputStreamReader;
import java.sql.SQLException;
import java.util.InputMismatchException;
import java.util.List;

/**
 * @author Le Trong Nghia
 * @date Sep 19, 2016
 * @version 1.0
 * @description this is main class
 */
public class ManagementCD {
	public static BufferedReader input = new BufferedReader(new InputStreamReader(System.in));
	public static CDContoller cdController = new CDContoller();
	public static List<CD> list;
	
	public static void printList(List<CD> list) {
		System.out.println("----------------List CD--------------");
		list.forEach(i -> i.toString());
	}
	
	
	public static void main(String[] args) throws ClassNotFoundException, SQLException, NumberFormatException, IOException {
		// TODO Auto-generated method stub
		list = cdController.getListCD();
		boolean stop = false;
		do {
			System.out.println("Select function");
			System.out.println("1 - Show list CD");
			System.out.println("2 - Search name");
			System.out.println("3 - Update CD");
			System.out.println("4 - Delete");
			System.out.println("5 - Exit");
			int choose = Integer.parseInt(input.readLine());
			switch (choose) {
				case 1: {
					list = cdController.getListCD();
					printList(list);
				} break;
				case 2: {
					System.out.println("Input keyword: ");
					String key = input.readLine();
					List<CD> search = cdController.searchCD(key);
					printList(search);
				} break;
				case 3: {
					printList(list);
					System.out.print("Input id: ");
					int id = Integer.parseInt(input.readLine());
					System.out.print("Input number of songs: ");
					int numbers = Integer.parseInt(input.readLine());
					System.out.print("Input prices: ");
					double price = Double.parseDouble(input.readLine());
					if (!cdController.updateCD(id, numbers, price))
						System.out.println("Insert susccess");
					else
						System.out.println("Failed");
				} break;
				case 4: {
					printList(list);
					System.out.print("Input id: ");
					int id = Integer.parseInt(input.readLine());
					System.out.println("Do you want to delete? Y/N");
					String s = input.readLine();
					if(s.equalsIgnoreCase("y")) {
						if (!cdController.deleteCD(id))
							System.out.println("Insert susccess");
						else
							System.out.println("Failed");
					}
				} break;
				case 5: {
					stop = true;
				} break;
				default:
					throw new InputMismatchException("Don't know");
			}
		} while(stop == false);
		
	}

}
